# üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Kubernetes –Ω–∞ —Å–µ—Ä–≤–µ—Ä

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

**–¢–≤–æ–π —Å–µ—Ä–≤–µ—Ä:** `31.97.76.106`  
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** Docker + docker-compose  
**–¶–µ–ª—å:** –î–æ–±–∞–≤–∏—Ç—å Kubernetes –¥–ª—è –≥–∏–±–∫–æ–≥–æ –¥–µ–ø–ª–æ—è

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. **–ü–æ—Ä—Ç—ã –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã**
Kubernetes –∏ docker-compose –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, –ù–û:
- **Docker-compose** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç host –ø–æ—Ä—Ç—ã (80, 443, 5432, 6379)
- **Kubernetes** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç NodePort –∏–ª–∏ LoadBalancer

### 2. **–†–µ—Å—É—Ä—Å—ã —Å–µ—Ä–≤–µ—Ä–∞**
- **–ú–∏–Ω–∏–º—É–º:** 2 CPU, 4GB RAM
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** 4 CPU, 8GB RAM

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@31.97.76.106
```

### –®–∞–≥ 2: –ó–∞–≥—Ä—É–∂–∞–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–ø—Ç

```bash
# –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∫—Ä–∏–ø—Ç
curl -O https://raw.githubusercontent.com/—Ç–≤–æ–π-username/FixDrive/main/k8s/server-setup.sh

# –ò–ª–∏ –∫–æ–ø–∏—Ä—É–µ–º –≤—Ä—É—á–Ω—É—é –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
# nano server-setup.sh  # –≤—Å—Ç–∞–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

# –ó–∞–ø—É—Å–∫–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É
chmod +x server-setup.sh
./server-setup.sh
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É

```bash
# –°—Ç–∞—Ç—É—Å –∫–ª–∞—Å—Ç–µ—Ä–∞
kubectl get nodes

# –°—Ç–∞—Ç—É—Å –ø–æ–¥–æ–≤
kubectl get pods -A

# Ingress controller
kubectl get svc -n ingress-nginx
```

## üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD

### –®–∞–≥ 4: –ü–æ–ª—É—á–∞–µ–º kubeconfig

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω—è–µ–º
cat ~/.kube/config | base64 -w 0
```

### –®–∞–≥ 5: –î–æ–±–∞–≤–ª—è–µ–º –≤ GitHub Secrets

1. –ò–¥–µ–º –≤ GitHub ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions
2. –°–æ–∑–¥–∞–µ–º `KUBE_CONFIG` —Å –ø–æ–ª—É—á–µ–Ω–Ω–æ–π base64 —Å—Ç—Ä–æ–∫–æ–π

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–æ–≤

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```yaml
# docker-compose.yml (—Ç–µ–∫—É—â–∏–π)
ports:
  - "80:8080"    # HTTP
  - "443:8080"   # HTTPS  

# Kubernetes ingress
# NodePort: 30000-32767
# –ü—Ä–∏–º–µ—Ä: 30080 –¥–ª—è HTTP, 30443 –¥–ª—è HTTPS
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û–¥–∏–Ω –ø–æ—Ä—Ç (—Ç—Ä–µ–±—É–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ docker-compose)

```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º docker-compose
docker-compose down

# Kubernetes –∑–∞–π–º–µ—Ç –ø–æ—Ä—Ç—ã 80/443 —á–µ—Ä–µ–∑ ingress
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –°—Ç–∞—Ç—É—Å –∫–ª–∞—Å—Ç–µ—Ä–∞
kubectl get nodes
kubectl get pods -A

# –õ–æ–≥–∏
kubectl logs -f deployment/fixdrive-app -n fixdrive

# –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
kubectl scale deployment fixdrive-app --replicas=3 -n fixdrive

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
kubectl rollout restart deployment/fixdrive-app -n fixdrive
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —É —Ç–µ–±—è –±—É–¥–µ—Ç:

‚úÖ **Kubernetes –∫–ª–∞—Å—Ç–µ—Ä** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ 31.97.76.106  
‚úÖ **Ingress controller** –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞  
‚úÖ **CI/CD –≥–æ—Ç–æ–≤** –¥–ª—è –¥–µ–ø–ª–æ—è  
‚úÖ **–ê–≤—Ç–æ—Å–∫–∞–ª–∏–Ω–≥** (HPA) –Ω–∞—Å—Ç—Ä–æ–µ–Ω  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —á–µ—Ä–µ–∑ kubectl  

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å docker-compose

1. **–¢–µ—Å—Ç–∏—Ä—É–µ–º** Kubernetes –¥–µ–ø–ª–æ–π –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø–æ—Ä—Ç–∞—Ö
2. **–£–±–µ–∂–¥–∞–µ–º—Å—è** —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç  
3. **–ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è** –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
4. **–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º** docker-compose –∫–æ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã

## üìû –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

```bash
# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞
kubeadm reset
rm -rf ~/.kube
./server-setup.sh

# –õ–æ–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
journalctl -u kubelet
``` 